name: TOOLBOXLAP

on:
  workflow_dispatch:

jobs:
  prepare:
    name: Prepare TOOLBOXLAP Scripts
    runs-on: windows-latest
    timeout-minutes: 60

    steps:
      # 1️⃣ Checkout this GitHub repo
      - name: Checkout Repo
        uses: actions/checkout@v4

      # 2️⃣ Create a folder for scripts
      - name: Create Scripts Folder
        run: cmd /c "mkdir toolbox_scripts"

      # 3️⃣ Generate Downloads.bat
      - name: Generate Downloads.bat
        run: |
          cmd /c "echo @echo off > toolbox_scripts\Downloads.bat"
          cmd /c "echo REM Download your files here >> toolbox_scripts\Downloads.bat"
          cmd /c "echo curl.exe -L -o Downloads.bat https://gitlab.com/raposabrty/pcrdp/-/raw/main/Downloads.bat >> toolbox_scripts\Downloads.bat"
          cmd /c "echo cmd /c Downloads.bat >> toolbox_scripts\Downloads.bat"

      # 4️⃣ Generate show.bat
      - name: Generate show.bat
        run: |
          cmd /c "echo @echo off > toolbox_scripts\show.bat"
          cmd /c "echo REM Add your show website commands here >> toolbox_scripts\show.bat"
          cmd /c "echo echo Running show.bat >> toolbox_scripts\show.bat"

      # 5️⃣ Generate loop.bat
      - name: Generate loop.bat
        run: |
          cmd /c "echo @echo off > toolbox_scripts\loop.bat"
          cmd /c "echo REM Add your loop commands here >> toolbox_scripts\loop.bat"
          cmd /c "echo echo Running loop.bat >> toolbox_scripts\loop.bat"

      # 6️⃣ Package all scripts into a ZIP
      - name: Package Scripts
        run: |
          powershell Compress-Archive -Path toolbox_scripts\* -DestinationPath toolbox_scripts\TOOLBOXLAP_Scripts.zip

      # 7️⃣ Upload as artifact (GitHub Actions v4)
      - name: Upload Scripts for Cloud PC
        uses: actions/upload-artifact@v4
        with:
          name: TOOLBOXLAP_Scripts
          path: toolbox_scripts\TOOLBOXLAP_Scripts.zip
